var app=angular.module("emailMarketingApp",["ngRoute","toaster","angularSpinner"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/formulario",{templateUrl:"../views/formulario.html",controller:"FormularioController"}).when("/end",{templateUrl:"../views/end.html",controller:"EndController"}).otherwise({redirectTo:"/formulario"})}]),app.factory("Config",function(){var a="http://agilesolutions.com:8080/";return{base_url:a,endpoints:{questionario:"questionario/"}}}),app.controller("EndController",["$scope","$http","$routeParams","$location","Config",function(a,b,c,d,e){}]),app.controller("FormularioController",["$scope","$http","$routeParams","$location","Config","toaster","usSpinnerService",function(a,b,c,d,e,f,g){function h(){return k.test(a.emailCliente)?!0:(i("O campo email deve conter um email valido"),!1)}function i(a){f.pop({type:"error",title:a})}function j(){var b=[];return angular.forEach(a.question2,function(a){a.selected&&b.push(a.name),angular.forEach(a.subQuestionslevel2,function(a){a.selected&&b.push(a.name)})}),b}var k=/^[_a-z0-9]+(\.[_a-z0-9]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;a.question1={question:"Qual é o seu papel no processo de decisão da empresa?",answers:["Eu decido.","Eu influencio nas questões.","Eu não me envolvo nas decisões."],finalAnswer:""},a.question2=[{name:"Demandas de Software Tributário e Fiscal",selected:!1,subQuestionslevel2:[{name:"Tax Declaration Framework (SAP TDF)",selected:!1},{name:"SAP TAX Intelligence and Management Platform by ALLTAX",selected:!1}]},{name:"SAP S/4 HANA",selected:!1,subQuestionslevel2:[{name:"Implementação S/4 HANA",selected:!1},{name:"Migração SAP ERP para S/4 HANA",selected:!1},{name:"Migração SAP ERP para S/4 Nuvem",selected:!1},{name:"S/4 HANA Finance",selected:!1},{name:"RDS S/4 HANA",selected:!1},{name:"Projetos sob demanda utilizando SAP HANA",selected:!1},{name:"Business Intelligence",selected:!1},{name:"Orçamento Planejamento",selected:!1}]},{name:"Agrobusiness",selected:!1,subQuestionslevel2:[{name:"Solução Integral Agro (AgroBiz)",selected:!1},{name:"Laboratório de Qualidade Agrícola (AQM)",selected:!1},{name:"Portal de Fornecedores Agrícola (ASM)",selected:!1},{name:"Balança",selected:!1},{name:"Mobilidade para Agronegócio",selected:!1},{name:"GIS",selected:!1}]},{name:"Outros",selected:!1,subQuestionslevel2:[{name:"Internet of Things (IOT)",selected:!1},{name:"Mapeamento Integral dos Consumidores (Cunsumer Insight 365)",selected:!1},{name:"Projeto Florestal",selected:!1},{name:"Alinhamento da estratégia de Negócio com TI",selected:!1},{name:"Suporte, melhorias e recursos (AMS)",selected:!1}]}],a.question3={question:"Autorizo a AGILE a ultilizar informação aqui declarada para o desenvolvimento de campanhas de mercado, convites e eventos, atualizações de base de dados e para futuros contatos comerciais?",answers:["Sim.","Não."],finalAnswer:""},a.saveFormulario=function(){if(h()){var c={nome:a.nomeCliente,sobrenome:a.sobrenomeCliente,empresa:a.empresaCliente,cargo:a.cargoCliente,email:a.emailCliente,telefone:a.telefoneCliente,perguntas:{p1:a.question1.finalAnswer,p2:j(),p3:a.question1.finalAnswer}};angular.element("#loader").show(),b.post(e.base_url+e.endpoints.questionario,c).then(function(a){console.log("deu certo",a),angular.element("#loader").hide(),d.path("/end")},function(a){console.log("deu erro",a),angular.element("#loader").hide()})}}}]);